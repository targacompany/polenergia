document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('[calc-data="type-toggler"]').forEach(e=>{const a=e.querySelectorAll('[data-calc="calc-button"]'),t=gsap.utils.toArray('[data-calc="advanced-option"]'),o=gsap.utils.toArray('[data-calc="advanced-second"]'),c=gsap.utils.toArray('[calc-button="hide-on-advanced"]');gsap.set([...t,...o],{display:"none",maxHeight:0,opacity:0,overflow:"hidden"});const l=e=>{e.forEach(e=>{gsap.killTweensOf(e),e.style.display="flex",gsap.fromTo(e,{maxHeight:0,opacity:0,overflow:"hidden"},{maxHeight:e.scrollHeight,opacity:1,duration:.4,ease:"power2.out",onComplete:()=>{e.style.maxHeight="none",e.style.overflow=""}})})},n=e=>{e.forEach(e=>{gsap.killTweensOf(e),gsap.to(e,{maxHeight:0,opacity:0,overflow:"hidden",duration:.3,ease:"power2.in",onComplete:()=>{e.style.display="none"}})})};a.forEach(e=>{e.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("is-active")),e.classList.add("is-active");const s="is-advanced"===e.getAttribute("calc-option");s?(l(t),n(o),c.forEach(e=>e.style.display="none")):(n(t),n(o),c.forEach(e=>e.style.display="")),document.dispatchEvent(new CustomEvent("polenergia:calculator:advanced",{detail:{active:s}}))})}),t.forEach(e=>{const a=e.querySelector('[data-calc="next-data"]');a&&a.addEventListener("click",()=>{n(t),l(o)})}),o.forEach(e=>{const a=e.querySelector('[data-button="previous-step"]');a&&a.addEventListener("click",()=>{n(o),l(t)})})})});